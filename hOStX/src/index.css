
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 14.9%;
  }

  .theme-green {
    --theme-primary: 142 76% 36%;
    --theme-secondary: 142 66% 26%;
    --theme-accent: 142 86% 56%;
    --theme-cyan-override: 180 86% 46%;
    --theme-yellow-override: 60 86% 56%;
  }

  .theme-cyan {
    --theme-primary: 180 86% 46%;
    --theme-secondary: 180 76% 36%;
    --theme-accent: 180 96% 66%;
    --theme-cyan-override: 180 86% 46%;
    --theme-yellow-override: 60 86% 56%;
  }

  .theme-amber {
    --theme-primary: 38 92% 50%;
    --theme-secondary: 38 82% 40%;
    --theme-accent: 38 100% 70%;
    --theme-cyan-override: 180 86% 46%;
    --theme-yellow-override: 38 92% 50%;
  }

  .theme-red {
    --theme-primary: 0 84% 50%; /* Deeper Red */
    --theme-secondary: 0 74% 40%; /* Darker Red */
    --theme-accent: 45 93% 47%; /* Brass/Amber */
    --theme-cyan-override: 45 93% 47%; /* Override with Brass */
    --theme-yellow-override: 45 93% 47%; /* Override with Brass */
  }

  /* Define seastorm-grey */
  .bg-seastorm-grey {
    background-color: #2F363F; /* A dark, desaturated blue-grey */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    cursor: url('/desk-icon.svg') 12 12, auto;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
  }
  button, a, input, textarea, [role="button"] {
    cursor: url('/desk-icon.svg') 12 12, pointer;
  }
}

.themed-text-primary { color: hsl(var(--theme-primary)); }
.themed-text-secondary { color: hsl(var(--theme-secondary)); }
.themed-text-accent { color: hsl(var(--theme-accent)); }
.themed-text-cyan { color: hsl(var(--theme-cyan-override)); }
.themed-text-yellow { color: hsl(var(--theme-yellow-override)); }

.themed-bg-primary { background-color: hsl(var(--theme-primary)); }
.themed-bg-secondary { background-color: hsl(var(--theme-secondary)); }
.themed-bg-accent { background-color: hsl(var(--theme-accent)); }

.themed-border-primary { border-color: hsl(var(--theme-primary)); }
.themed-border-secondary { border-color: hsl(var(--theme-secondary)); }
.themed-border-accent { border-color: hsl(var(--theme-accent)); }

.hover\:themed-bg-primary:hover { background-color: hsl(var(--theme-primary)); }
.hover\:themed-bg-secondary:hover { background-color: hsl(var(--theme-secondary)); }
.hover\:themed-bg-accent:hover { background-color: hsl(var(--theme-accent)); }

.focus\:themed-border-secondary:focus { border-color: hsl(var(--theme-secondary)); }

.terminal-text {
  text-shadow: 0 0 3px hsl(var(--theme-primary) / 0.4);
}

.command-prompt-wrapper {
  position: fixed;
  z-index: 50;
  transition: all 0.3s ease;
}

.command-prompt {
  display: inline-flex;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.8);
  border: 1px solid hsl(var(--theme-primary));
  border-radius: 4px;
  padding: 4px 8px;
  width: auto;
  max-width: 80vw;
  transition: width 0.3s ease;
  cursor: text;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.command-prompt:not([data-has-input="true"]) {
  width: 4rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.command-prompt:not([data-has-input="true"]) .command-input {
  width: 0;
  min-width: 0;
}

.command-prompt-prefix {
  color: hsl(var(--theme-primary));
  margin-right: 0.5rem;
  white-space: nowrap;
  pointer-events: none;
  user-select: none;
  -webkit-user-select: none;
}

.prompt-top-right {
  top: 1rem;
  right: 1rem;
}

.prompt-bottom {
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
}

.command-input {
  background: transparent;
  border: none;
  outline: none;
  color: hsl(var(--theme-accent));
  font-family: 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
  width: 100%;
  padding: 0;
  margin: 0;
  resize: none;
  overflow: hidden;
  min-width: 80px;
  transition: width 0.3s ease;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: text;
  user-select: text;
  font-size: 16px; /* Prevent zoom on iOS */
}

/* Ensure input is accessible on touch devices */
.command-input:focus {
  outline: none;
}

/* Prevent double-tap zoom on mobile */
.command-prompt * {
  touch-action: manipulation;
}

.typing-cursor {
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  from, to {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

@keyframes pulse-perimeter {
  0%, 100% {
    box-shadow: 0 0 12px 3px hsl(var(--theme-primary) / 0.8), inset 0 0 12px 3px hsl(var(--theme-primary) / 0.8);
  }
  50% {
    box-shadow: 0 0 20px 8px hsl(var(--theme-accent) / 0.8), inset 0 0 20px 8px hsl(var(--theme-accent) / 0.8);
  }
}

.pulsing-perimeter {
  animation: pulse-perimeter 2.5s infinite;
  border: 1px solid transparent;
}

@keyframes desk-ready-pulse {
  0%, 100% {
    box-shadow: 0 0 6px hsl(var(--theme-primary) / 0.6);
    border-color: hsl(var(--theme-primary) / 0.6);
  }
  50% {
    box-shadow: 0 0 12px hsl(var(--theme-accent) / 0.8);
    border-color: hsl(var(--theme-accent) / 0.8);
  }
}

.desk-ready-pulse {
  animation: desk-ready-pulse 2.5s infinite;
}

.matrix-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
  z-index: 1;
}

@keyframes broadcast-flicker-anim {
  0%, 100% {
    border-color: hsl(45 93% 47% / 0.4);
    box-shadow: 0 0 2px hsl(45 93% 47% / 0.3);
  }
  50% {
    border-color: hsl(45 93% 47% / 0.8);
    box-shadow: 0 0 5px hsl(45 93% 47% / 0.6);
  }
}

.broadcast-flicker {
  animation: broadcast-flicker-anim 2.5s infinite;
}

/* Styling for NavInterface coord inputs */
.nav-coord-input {
  @apply bg-transparent border-0 border-b border-white/10 rounded-none h-6 p-1 text-xs w-24;
  @apply focus:ring-0 focus:border-b-2 focus:bg-black/20;
  color: hsl(var(--theme-primary));
}

.nav-coord-input:focus {
  border-color: hsl(var(--theme-accent));
}

.nav-coord-input::placeholder {
  color: hsl(var(--theme-secondary));
}


/* Mobile-specific optimizations */
@media (max-width: 768px) {
  .command-prompt {
    max-width: calc(100vw - 2rem);
  }
  
  .command-input {
    font-size: 16px; /* iOS requires 16px to prevent auto-zoom */
  }
}
